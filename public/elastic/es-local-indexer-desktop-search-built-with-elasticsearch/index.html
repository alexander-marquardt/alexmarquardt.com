<!DOCTYPE html>
<html lang="en" dir="auto" data-theme="light">

<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="noindex, nofollow">
<title>ES Local Indexer – Desktop search powered by Elasticsearch | Alexander Marquardt</title>
<meta name="keywords" content="">
<meta name="description" content="August 7, 2019
Introduction
Elasticsearch provides search functionality for some of the most important websites in the world including Wikimedia (i.e. Wikipedia), eBay, Yelp, Tinder, and many others. Elasticsearch is super scalable, which means that just as easily as it can be scaled it up for use in huge complex systems, it can also be scaled down for use in smaller projects.
ES Local Indexer is a small desktop search application that runs on top of a local Elasticsearch installation. It indexes HTML documents into Elasticsearch and provides an intuitive browser-based interface for searching through the ingested documents. The ES Local Indexer project consists of two main components:">
<meta name="author" content="">
<link rel="canonical" href="http://localhost:1313/elastic/es-local-indexer-desktop-search-built-with-elasticsearch/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.343cc480b9ffc8f04ccbe5e968ad674880cab773ec19905e93033065c1e7a804.css" integrity="sha256-NDzEgLn/yPBMy&#43;XpaK1nSIDKt3PsGZBekwMwZcHnqAQ=" rel="preload stylesheet" as="style">
<link rel="icon" href="http://localhost:1313/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="http://localhost:1313/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="http://localhost:1313/favicon-32x32.png">
<link rel="apple-touch-icon" href="http://localhost:1313/apple-touch-icon.png">
<link rel="mask-icon" href="http://localhost:1313/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" hreflang="en" href="http://localhost:1313/elastic/es-local-indexer-desktop-search-built-with-elasticsearch/">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
</noscript>
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.querySelector("html").dataset.theme = 'dark';
    }

</script>
</head>
<body id="top">
    <header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="http://localhost:1313/" accesskey="h" title="Alexander Marquardt (Alt + H)">Alexander Marquardt</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)" aria-label="Toggle theme">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    
    <h1 class="post-title entry-hint-parent">
      ES Local Indexer – Desktop search powered by Elasticsearch
    </h1>
    <div class="post-meta"><span title='2019-08-08 00:00:00 +0000 UTC'>August 8, 2019</span>&nbsp;·&nbsp;<span>5 min</span>

</div>
  </header> <div class="toc">
    <details >
        <summary accesskey="c" title="(Alt + C)">
            <span class="details">Table of Contents</span>
        </summary>

        <div class="inner"><ul>
                <li>
                    <a href="#introduction" aria-label="Introduction">Introduction</a></li>
                <li>
                    <a href="#purpose" aria-label="Purpose">Purpose</a></li>
                <li>
                    <a href="#requirements-and-installation" aria-label="Requirements and Installation">Requirements and Installation</a></li>
                <li>
                    <a href="#ingesting-local-documents-data-into-elasticsearch" aria-label="Ingesting local documents data into Elasticsearch">Ingesting local documents data into Elasticsearch</a></li>
                <li>
                    <a href="#launch-the-search-application" aria-label="Launch the search application">Launch the search application</a></li>
                <li>
                    <a href="#using-the-search-application" aria-label="Using the search application">Using the search application</a></li>
                <li>
                    <a href="#conclusion" aria-label="Conclusion">Conclusion</a>
                </li>
            </ul>
        </div>
    </details>
</div>

  <div class="post-content"><p>August 7, 2019</p>
<h1 id="introduction">Introduction<a hidden class="anchor" aria-hidden="true" href="#introduction">#</a></h1>
<p>Elasticsearch provides search functionality for some of the most important websites in the world including <a href="https://blog.wikimedia.org/2014/01/06/wikimedia-moving-to-elasticsearch/">Wikimedia (i.e. Wikipedia)</a>, <a href="https://www.elastic.co/videos/ebay-and-elasticsearch-this-is-not-small-data">eBay</a>, <a href="https://engineeringblog.yelp.com/2017/06/moving-yelps-core-business-search-to-elasticsearch.html">Yelp</a>, <a href="https://www.elastic.co/elasticon/conf/2017/sf/tinder-using-the-elastic-stack-to-make-connections-around-the-world">Tinder</a>, and many others. Elasticsearch is super scalable, which means that just as easily as it can be scaled it up for use in huge complex systems, it can also be scaled down for use in smaller projects.</p>
<p><a href="https://github.com/alexander-marquardt/es_local_indexer">ES Local Indexer</a> is a small desktop search application that runs on top of a local Elasticsearch installation. It indexes HTML documents into Elasticsearch and provides an intuitive browser-based interface for searching through the ingested documents. The ES Local Indexer project consists of two main components:</p>
<ol>
<li>An indexing app - indexes all documents in a given directory tree into Elasticsearch.</li>
<li>A searching app - generates and displays the search results.</li>
</ol>
<p>ES Local Indexer is simple to use. In order to ingest HTML documents into Elasticsearch and then search them, just start a local instance of Elasticsearch, ingest data into Elasticsearch with the indexing app, and then start the searching app. After starting the searching app, use a browser to view the search results.</p>
<h1 id="purpose">Purpose<a hidden class="anchor" aria-hidden="true" href="#purpose">#</a></h1>
<p>The ES Local Indexer project is intended for the following scenarios:</p>
<ul>
<li>It can be used as a reference for implementing search functionality within a larger project or as a base for implementing a full-featured search application.</li>
<li>It can be used for indexing previously downloaded html documents, and providing search capabilities across those documents. This could be useful for example if one knows they will not have internet access for some amount of time (such as while on an airplane), and need to be able to search previously downloaded documents.</li>
</ul>
<p>ES Local Indexer is not fully-featured or production-ready and is designed to be used locally (i.e. not exposed to the internet). In order to keep the code simple I have not used any Javascript or CSS on the front end. A production application based on this code would likely add both CSS and Javascript to improve the user experience.</p>
<h1 id="requirements-and-installation">Requirements and Installation<a hidden class="anchor" aria-hidden="true" href="#requirements-and-installation">#</a></h1>
<p>See the <a href="https://github.com/alexander-marquardt/es_local_indexer">ES Local Indexer gitub page</a> for installation instructions.</p>
<h1 id="ingesting-local-documents-data-into-elasticsearch">Ingesting local documents data into Elasticsearch<a hidden class="anchor" aria-hidden="true" href="#ingesting-local-documents-data-into-elasticsearch">#</a></h1>
<p>To test ES Local Indexer with real documents, download offline Elasticsearch documentation in HTML form from <a href="https://github.com/elastic/built-docs">https://github.com/elastic/built-docs</a>. Once downloaded, the HTML documents are ready for ingestion into Elasticsearch.</p>
<p>In order to ingest the HTML documents, execute the following command replacing PATH_TO_DOCS with the path to the documentation directory, and INDEX_NAME with the name of the Elasticsearch index that will ingest the HTML from each page:</p>
<pre tabindex="0"><code>python3 indexing_app.py -p PATH_TO_DOCS -i INDEX_NAME
</code></pre><p>In my environment, the exact command that I enter to ingest the HTML Documentation into Elasticsearch is the following:</p>
<pre tabindex="0"><code>python3 indexing_app.py -p ~/Documents/built-docs/ -i built_es_docs_idx
</code></pre><p>Once the ingestion process has started, move on to the next step (although search results will be more meaningful ingestion has completed).</p>
<h1 id="launch-the-search-application"><a href="https://github.com/alexander-marquardt/es_local_indexer/blob/master/README.md#searching-local-documents"></a>Launch the search application<a hidden class="anchor" aria-hidden="true" href="#launch-the-search-application">#</a></h1>
<p>Once documents have been ingested into Elasticsearch, the code to launch the search interface web app can be executed as follows:</p>
<pre tabindex="0"><code>python3 searching_app.py -p PATH_TO_DOCS -i INDEX_NAME
</code></pre><p>The PATH_TO_DOCS and INDEX_NAME should be the same as the values specified when ingesting the documents into Elasticsearch. In my environment, the exact command to launch the search interface web app is the following:</p>
<pre tabindex="0"><code> python3 searching_app.py -p ~/Documents/built-docs/ -i built_es_docs_idx
</code></pre><p>Point a browser to <a href="http://127.0.0.1:5000/">http://127.0.0.1:5000/</a>, and begin searching the documents that were previously downloaded and indexed into Elasticsearch.</p>
<h1 id="using-the-search-application">Using the search application<a hidden class="anchor" aria-hidden="true" href="#using-the-search-application">#</a></h1>
<p>The search interface is designed to mimic popular search applications such as Google or Bing.  The main search page appears as follows:</p>
<p><img alt="Screenshot 2019-08-07 at 22.02.00" loading="lazy" src="/elastic/es-local-indexer-desktop-search-built-with-elasticsearch/images/screenshot-2019-08-07-at-22.02.00.png"></p>
<p>After hitting the search button, results will appear as follows:</p>
<p><img alt="Screenshot 2019-08-07 at 22.02.56.png" loading="lazy" src="/elastic/es-local-indexer-desktop-search-built-with-elasticsearch/images/screenshot-2019-08-07-at-22.02.56.png"></p>
<p>Notice that in the above results it appears that the first three hits are identical. This is because we have ingested basically the same document three times - <em>current</em>, <em>7.3</em>, and <em>master</em> - each of which contains the same information, and so it is not surprising that we have three hits each with the same <em>score</em>. We get better results if we include the version in our search request as follows:</p>
<p><img alt="Screenshot 2019-08-07 at 22.06.21.png" loading="lazy" src="/elastic/es-local-indexer-desktop-search-built-with-elasticsearch/images/screenshot-2019-08-07-at-22.06.21.png"></p>
<p>Now the first three documents are different and they all correspond to documentation for version 7.3 of Elasticsearch. While this is much better than before, it could be made even better by taking advantage of domain-specific knowledge that we have with respect to Elasticsearch documentation. If this were an application that were designed for <em>only</em> displaying Elasticsearch documentation, it would make sense to:</p>
<ol>
<li>Ensure that a &ldquo;version&rdquo; field is created when each document is indexed into Elasticsearch.</li>
<li>Include a drop-down menu to allow the user to select which version of documentation they are interested in seeing.</li>
<li>Filter documents for a specific version by using a <a href="https://www.elastic.co/guide/en/elasticsearch/reference/7.3/query-dsl-bool-query.html#score-bool-filter">bool filter</a> to ensure that all documents that do not match the desired release are filtered out and not displayed.</li>
</ol>
<p>However, we have not implemented the above domain-specific enhancements because ES Local Indexer is designed to be a <em>generic</em> implementation.</p>
<h1 id="conclusion">Conclusion<a hidden class="anchor" aria-hidden="true" href="#conclusion">#</a></h1>
<p>In this blog we have presented ES Local Indexer. This is a desktop search application that provides capabilities to ingest HTML documents from a local source into Elasticsearch, and that displays a web-based interface for searching these documents. ES Local Indexer can be used for searching downloaded HTML content, or it can be used as a base for larger projects that require search functionality.</p>


  </div>

  <footer class="post-footer">
    <ul class="post-tags">
    </ul>
<nav class="paginav">
  <a class="prev" href="http://localhost:1313/elastic/es-local-indexer-using-elasticsearch-for-searching-locally-stored-documents/">
    <span class="title">« Prev</span>
    <br>
    <span>Es Local Indexer - using Elasticsearch for searching locally stored documents</span>
  </a>
  <a class="next" href="http://localhost:1313/elastic/counting-unique-beats-agents-elasticsearch/">
    <span class="title">Next »</span>
    <br>
    <span>Counting unique beats agents sending data into Elasticsearch</span>
  </a>
</nav>

  </footer>
</article>
    </main>
    
<footer class="footer">
        <span>&copy; 2025 <a href="http://localhost:1313/">Alexander Marquardt</a></span> · 

    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu');
    if (menu) {
        
        const scrollPosition = localStorage.getItem("menu-scroll-position");
        if (scrollPosition) {
            menu.scrollLeft = parseInt(scrollPosition, 10);
        }
        
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        const html = document.querySelector("html");
        if (html.dataset.theme === "dark") {
            html.dataset.theme = 'light';
            localStorage.setItem("pref-theme", 'light');
        } else {
            html.dataset.theme = 'dark';
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;

        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerHTML = 'copy';

        function copyingDone() {
            copybutton.innerHTML = 'copied!';
            setTimeout(() => {
                copybutton.innerHTML = 'copy';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                navigator.clipboard.writeText(codeblock.textContent);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) { };
            selection.removeRange(range);
        });

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
        } else if (container.parentNode.firstChild == container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
        }
    });
</script>
</body>

</html>

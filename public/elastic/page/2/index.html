<!DOCTYPE html>
<html lang="en" dir="auto" data-theme="light">

<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="noindex, nofollow">
<title>Elastic Stack | Alexander Marquardt</title>
<meta name="keywords" content="">
<meta name="description" content="Architectural patterns, failure modes, and large-scale system behavior in Elasticsearch and related components.">
<meta name="author" content="">
<link rel="canonical" href="http://localhost:1313/elastic/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.2fe4dc5b52567b7454ee976e121c74370e14415db7564bb5ae6de9bd591821ff.css" integrity="sha256-L&#43;TcW1JWe3RU7pduEhx0Nw4UQV23Vku1rm3pvVkYIf8=" rel="preload stylesheet" as="style">
<link rel="icon" href="http://localhost:1313/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="http://localhost:1313/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="http://localhost:1313/favicon-32x32.png">
<link rel="apple-touch-icon" href="http://localhost:1313/apple-touch-icon.png">
<link rel="mask-icon" href="http://localhost:1313/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" type="application/rss+xml" href="http://localhost:1313/elastic/index.xml" title="rss">
<link rel="alternate" hreflang="en" href="http://localhost:1313/elastic/">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
</noscript>
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.querySelector("html").dataset.theme = 'dark';
    }

</script>
</head>
<body class="list" id="top">
    <header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="http://localhost:1313/" accesskey="h" title="Alexander Marquardt (Alt + H)">Alexander Marquardt</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)" aria-label="Toggle theme">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
        </ul>
    </nav>
</header>
<main class="main"> 
<header class="page-header">
  <h1>
    Elastic Stack
  </h1>
  <div class="post-description">
    Architectural patterns, failure modes, and large-scale system behavior in Elasticsearch and related components.
  </div>
</header>

<article class="post-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">Understanding and fixing &#34;too many script compilations&#34; errors in Elasticsearch
    </h2>
  </header>
  <div class="entry-content">
    <p>Introduction When using Elasticsearch, in some rare instances you may see an error such as “Too many dynamic script compilations within X minutes”. Such an error may be caused by a poor script design where parameters are hard-coded. In other cases this may be due to the script cache being too small or the compilation limit being too low. In this article, I will show how to determine if these default limits are too low, and how these limits can be modified.
...</p>
  </div>
  <footer class="entry-footer"><span title='2020-10-21 00:00:00 +0000 UTC'>October 21, 2020</span>&nbsp;·&nbsp;<span>4 min</span></footer>
  <a class="entry-link" aria-label="post link to Understanding and fixing &#34;too many script compilations&#34; errors in Elasticsearch" href="http://localhost:1313/elastic/elasticsearch-too-many-script-compilations/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">Using Logstash and Elasticsearch to calculate transaction duration in a microservices architecture
    </h2>
  </header>
  <div class="entry-content">
    <p>September 16, 2020
Introduction Elasticsearch allows you to unify your observability data in a powerful datastore so you can search and apply interactive analytics in real time to a huge number of use cases.
In one such use case, you may be using Elasticsearch to monitor a system that is composed of multiple microservices that process a given transaction. For such a system, you may be collecting an event corresponding to when the first microservice in the system starts processing the transaction, and another event corresponding to when the last microservice in the system finishes processing the transaction. In such an approach, each event should include a field with the transaction identifier, which will allow multiple events corresponding to a single transaction to be combined for analysis.
...</p>
  </div>
  <footer class="entry-footer"><span title='2020-09-16 00:00:00 +0000 UTC'>September 16, 2020</span>&nbsp;·&nbsp;<span>6 min</span></footer>
  <a class="entry-link" aria-label="post link to Using Logstash and Elasticsearch to calculate transaction duration in a microservices architecture" href="http://localhost:1313/elastic/using-logstash-and-elasticsearch-scripted-upserts-to-calculate-transaction-duration-from-out-of-order-events/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">Using Grok with Elasticsearch to add structure to your data
    </h2>
  </header>
  <div class="entry-content">
    <p>This article is available on Elastic’s blog as a 3-part series. Please check it out at the following URLs:
https://www.elastic.co/blog/structuring-elasticsearch-data-with-grok-on-ingest-for-faster-analytics
https://www.elastic.co/blog/slow-and-steady-how-to-build-custom-grok-patterns-incrementally
https://www.elastic.co/blog/debugging-broken-grok-expressions-in-elasticsearch-ingest-processors
</p>
  </div>
  <footer class="entry-footer"><span title='2020-07-13 00:00:00 +0000 UTC'>July 13, 2020</span>&nbsp;·&nbsp;<span>1 min</span></footer>
  <a class="entry-link" aria-label="post link to Using Grok with Elasticsearch to add structure to your data" href="http://localhost:1313/elastic/using-grok-with-elasticsearch-to-add-structure-to-your-data/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">Storing ingest time and calculating ingest lag in Elasticsearch
    </h2>
  </header>
  <div class="entry-content">
    <p>This article is available on Elastic’s blog at: https://www.elastic.co/blog/calculating-ingest-lag-and-storing-ingest-time-in-elasticsearch-to-improve-observability
</p>
  </div>
  <footer class="entry-footer"><span title='2020-06-02 00:00:00 +0000 UTC'>June 2, 2020</span>&nbsp;·&nbsp;<span>1 min</span></footer>
  <a class="entry-link" aria-label="post link to Storing ingest time and calculating ingest lag in Elasticsearch" href="http://localhost:1313/elastic/storing-ingest-time-and-calculating-ingest-lag-in-elasticsearch/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">Using boolean queries to improve search relevancy in Elasticsearch
    </h2>
  </header>
  <div class="entry-content">
    <p>Page moved to https://alexmarquardt.com/using-boolean-queries-to-improve-search-relevancy-in-elasticsearch/
</p>
  </div>
  <footer class="entry-footer"><span title='2020-05-12 00:00:00 +0000 UTC'>May 12, 2020</span>&nbsp;·&nbsp;<span>1 min</span></footer>
  <a class="entry-link" aria-label="post link to Using boolean queries to improve search relevancy in Elasticsearch" href="http://localhost:1313/elastic/using-boolean-queries-to-improve-search-relevancy-in-elasticsearch/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">Using boolean queries to improve search relevance in Elasticsearch
    </h2>
  </header>
  <div class="entry-content">
    <p>This article is available at: https://www.elastic.co/blog/how-to-improve-elasticsearch-search-relevance-with-boolean-queries
</p>
  </div>
  <footer class="entry-footer"><span title='2020-05-01 00:00:00 +0000 UTC'>May 1, 2020</span>&nbsp;·&nbsp;<span>1 min</span></footer>
  <a class="entry-link" aria-label="post link to Using boolean queries to improve search relevance in Elasticsearch" href="http://localhost:1313/elastic/using-boolean-queries-to-improve-search-relevance-in-elasticsearch/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">Using slow logs in Elastic Cloud Enterprise
    </h2>
  </header>
  <div class="entry-content">
    <p>April 26, 2020
Authors Tom Schreiber Alex Marquardt Version This blog article is based on ECE 2.4.3.
Introduction Elastic Cloud Enterprise (ECE) is a platform designed to ease the management, deployment, and configuration of multiple Elasticsearch clusters through a single administrative user interface. ECE, is the same product that powers the Elasticsearch Service hosted offering, and is available for installation on customer-managed servers. ECE can be deployed anywhere - on public or private clouds, virtual machines, or even on bare metal hardware. Once installed, ECE allows Elasticsearch clusters to be created, upgraded, or deleted with the click of a button.
...</p>
  </div>
  <footer class="entry-footer"><span title='2020-04-26 00:00:00 +0000 UTC'>April 26, 2020</span>&nbsp;·&nbsp;<span>11 min</span></footer>
  <a class="entry-link" aria-label="post link to Using slow logs in Elastic Cloud Enterprise" href="http://localhost:1313/elastic/using-slow-logs-in-elastic-cloud-enterprise/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">Using Elastic machine learning to detect anomalies in derivative values
    </h2>
  </header>
  <div class="entry-content">
    <p>April 21, 2020
Introduction In this blog, we use Elastic machine learning (ML) and derivative aggregations to detect sudden unexpected increases or decreases in the rate-of-change of CPU load on servers that are monitored by Metricbeat.
In order to make this blog easier to follow and the results easy to recreate, we abstract away the requirement for driving data from Metricbeat, and instead generate “fake” Metricbeat data using a Python script that drives data into Elasticsearch.
...</p>
  </div>
  <footer class="entry-footer"><span title='2020-04-21 00:00:00 +0000 UTC'>April 21, 2020</span>&nbsp;·&nbsp;<span>6 min</span></footer>
  <a class="entry-link" aria-label="post link to Using Elastic machine learning to detect anomalies in derivative values" href="http://localhost:1313/elastic/using-elastic-machine-learning-to-detect-anomalies-in-derivative-values/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">Using the Elasticsearch Enrich Processor with CSV data
    </h2>
  </header>
  <div class="entry-content">
    <p>This article is available at: https://www.elastic.co/blog/how-to-enrich-logs-and-metrics-using-an-elasticsearch-ingest-node
</p>
  </div>
  <footer class="entry-footer"><span title='2020-03-21 00:00:00 +0000 UTC'>March 21, 2020</span>&nbsp;·&nbsp;<span>1 min</span></footer>
  <a class="entry-link" aria-label="post link to Using the Elasticsearch Enrich Processor with CSV data" href="http://localhost:1313/elastic/using-the-elasticsearch-enrich-processor-with-csv-data/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">Converting CSV to JSON in Filebeat
    </h2>
  </header>
  <div class="entry-content">
    <p>Introduction Many organisations use excel files for creating and storing important data. For various reasons it may be useful to import such data into Elasticsearch. For example, one may need to get Master Data that is created in a spreadsheet into Elasticsearch where it could be used for enriching Elasticsearch documents. Or one may wish to use Elasticsearch and Kibana for analysing a dataset that is only available in a spreadsheet. In such cases, one option is to use Filebeat for uploading such CSV data into an Elasticsearch cluster.
...</p>
  </div>
  <footer class="entry-footer"><span title='2020-03-17 00:00:00 +0000 UTC'>March 17, 2020</span>&nbsp;·&nbsp;<span>6 min</span></footer>
  <a class="entry-link" aria-label="post link to Converting CSV to JSON in Filebeat" href="http://localhost:1313/elastic/converting-csv-to-json-in-filebeat/"></a>
</article>
<footer class="page-footer">
  <nav class="pagination">
    <a class="prev" href="http://localhost:1313/elastic/">
      «&nbsp;Prev&nbsp;
    </a>
    <a class="next" href="http://localhost:1313/elastic/page/3/">Next&nbsp;&nbsp;»
    </a>
  </nav>
</footer>
    </main>
    
<footer class="footer">
        <span>&copy; 2025 <a href="http://localhost:1313/">Alexander Marquardt</a></span> · 

    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu');
    if (menu) {
        
        const scrollPosition = localStorage.getItem("menu-scroll-position");
        if (scrollPosition) {
            menu.scrollLeft = parseInt(scrollPosition, 10);
        }
        
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        const html = document.querySelector("html");
        if (html.dataset.theme === "dark") {
            html.dataset.theme = 'light';
            localStorage.setItem("pref-theme", 'light');
        } else {
            html.dataset.theme = 'dark';
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
</body>

</html>

<!DOCTYPE html>
<html lang="en" dir="auto" data-theme="light">

<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="noindex, nofollow">
<title>A summary of recent research on increasing lifespan | Alexander Marquardt</title>
<meta name="keywords" content="">
<meta name="description" content="Authors

Ronald R. Marquardt
Suzhen Li
Alexander Marquardt

In association with All Natural Nutritional Products (ANNP) Inc.
Introduction
This blog provides an overview of recent research in the field of ageing.
A brief overview of the book: &ldquo;Lifespan: Why we age — and why we don&rsquo;t have to&rdquo;
David A. Sinclair and M. D. LaPlante have written a New York Times Bestseller called Lifespan: Why we age — and why we don&rsquo;t have to. David Sinclair has also given many interviews and talks which can be found online.">
<meta name="author" content="">
<link rel="canonical" href="http://localhost:1313/posts/a-summary-of-recent-research-on-increasing-lifespan/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.343cc480b9ffc8f04ccbe5e968ad674880cab773ec19905e93033065c1e7a804.css" integrity="sha256-NDzEgLn/yPBMy&#43;XpaK1nSIDKt3PsGZBekwMwZcHnqAQ=" rel="preload stylesheet" as="style">
<link rel="icon" href="http://localhost:1313/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="http://localhost:1313/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="http://localhost:1313/favicon-32x32.png">
<link rel="apple-touch-icon" href="http://localhost:1313/apple-touch-icon.png">
<link rel="mask-icon" href="http://localhost:1313/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" hreflang="en" href="http://localhost:1313/posts/a-summary-of-recent-research-on-increasing-lifespan/">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
</noscript>
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.querySelector("html").dataset.theme = 'dark';
    }

</script>
</head>
<body id="top">
    <header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="http://localhost:1313/" accesskey="h" title="Alexander Marquardt (Alt + H)">Alexander Marquardt</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)" aria-label="Toggle theme">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    
    <h1 class="post-title entry-hint-parent">
      A summary of recent research on increasing lifespan
    </h1>
    <div class="post-meta"><span title='2021-06-01 00:00:00 +0000 UTC'>June 1, 2021</span>&nbsp;·&nbsp;<span>10 min</span>

</div>
  </header> <div class="toc">
    <details >
        <summary accesskey="c" title="(Alt + C)">
            <span class="details">Table of Contents</span>
        </summary>

        <div class="inner"><ul>
                <li>
                    <a href="#authors" aria-label="Authors">Authors</a></li>
                <li>
                    <a href="#introduction" aria-label="Introduction">Introduction</a></li>
                <li>
                    <a href="#a-brief-overview-of-the-book-lifespan-why-we-age--and-why-we-dont-have-to" aria-label="A brief overview of the book: &ldquo;Lifespan: Why we age — and why we don&rsquo;t have to&rdquo;">A brief overview of the book: &ldquo;Lifespan: Why we age — and why we don&rsquo;t have to&rdquo;</a></li>
                <li>
                    <a href="#metabolic-changes-associated-with-ageing" aria-label="Metabolic changes associated with ageing">Metabolic changes associated with ageing</a></li>
                <li>
                    <a href="#suggestions-for-life-style-regime-for-longevity-and-healthy-living-what-does-david-do" aria-label="Suggestions for life style regime for longevity and healthy living (What does David do?)">Suggestions for life style regime for longevity and healthy living (What does David do?)</a></li>
                <li>
                    <a href="#autophagy-a-requirement-for-healthy-living-and-longevity" aria-label="Autophagy A requirement for healthy living and longevity">Autophagy A requirement for healthy living and longevity</a></li>
                <li>
                    <a href="#supplements-that-can-increase-sirtuin-activity-and-autophagy" aria-label="Supplements that can increase sirtuin activity and autophagy">Supplements that can increase sirtuin activity and autophagy</a></li>
                <li>
                    <a href="#summary-of-nad-and-its-precursors" aria-label="Summary of NAD&#43; and its precursors:">Summary of NAD+ and its precursors:</a></li>
                <li>
                    <a href="#e-pathways-for-synthesis-of-different-precursors-of-nad" aria-label="E. Pathways for synthesis of different precursors of NAD&#43;">E. Pathways for synthesis of different precursors of NAD+</a></li>
                <li>
                    <a href="#a-model-for-the-connection-between-nad-sirtuins-and-autophagy" aria-label="A model for the connection between NAD&#43;, sirtuins and autophagy">A model for the connection between NAD+, sirtuins and autophagy</a></li>
                <li>
                    <a href="#overview-on-procedures-to-increase-nad-in-the-body" aria-label="Overview on procedures to increase NAD&#43; in the body">Overview on procedures to increase NAD+ in the body</a></li>
                <li>
                    <a href="#a-summary-of-therapeutic-approaches-to-restore-nad-levels-and-their-impact-on-health" aria-label="A summary of therapeutic approaches to restore NAD&#43; levels and their impact on health">A summary of therapeutic approaches to restore NAD+ levels and their impact on health</a></li>
                <li>
                    <a href="#conclusion" aria-label="Conclusion">Conclusion</a>
                </li>
            </ul>
        </div>
    </details>
</div>

  <div class="post-content"><h2 id="authors">Authors<a hidden class="anchor" aria-hidden="true" href="#authors">#</a></h2>
<ul>
<li>Ronald R. Marquardt</li>
<li>Suzhen Li</li>
<li>Alexander Marquardt</li>
</ul>
<p>In association with <a href="https://annp.ca/">All Natural Nutritional Products (ANNP) Inc.</a></p>
<h2 id="introduction">Introduction<a hidden class="anchor" aria-hidden="true" href="#introduction">#</a></h2>
<p>This blog provides an overview of recent research in the field of ageing.</p>
<h2 id="a-brief-overview-of-the-book-lifespan-why-we-age--and-why-we-dont-have-to">A brief overview of the book: &ldquo;Lifespan: Why we age — and why we don&rsquo;t have to&rdquo;<a hidden class="anchor" aria-hidden="true" href="#a-brief-overview-of-the-book-lifespan-why-we-age--and-why-we-dont-have-to">#</a></h2>
<p>David A. Sinclair and M. D. LaPlante have written a New York Times Bestseller called <a href="https://lifespanbook.com/">Lifespan: Why we age — and why we don&rsquo;t have to</a>. David Sinclair has also given many interviews and talks which can be found online.</p>
<p>Below we summarize some of the highlights from this book and from his online discussions.</p>
<ul>
<li>David’s theory is that ageing is quite simply a loss of information over time.</li>
<li>Our cells store both digital and analog information. The main difference between them is that analog information is continuous whilst digital is discrete.</li>
<li>Our genetic code is digital, while the epigenetic code that determines and dictate which genes are expressed in each cell is analog. For example, even though skin cells and nerve cells have the same DNA, it is the epigenetic code that expresses different genes in a skin cell than would be expressed in a nerve cell.</li>
<li>Analog information is prone to the accumulation of noise and disruption over time.</li>
<li>David suggests that noise accumulation in epigenetic information disrupts gene expression and other nuclear processes within a cell leading to malfunctioning and inevitably ageing of the organism.</li>
<li>In other words, ageing doesn’t involve a change in our DNA sequences but can change how our body reads the DNA sequences which unlike genetic changes, may be reversible. Most epigenetic changes involve the reversible binding of certain compounds such as methyl groups to DNA.</li>
</ul>
<h2 id="metabolic-changes-associated-with-ageing">Metabolic changes associated with ageing<a hidden class="anchor" aria-hidden="true" href="#metabolic-changes-associated-with-ageing">#</a></h2>
<ul>
<li>Autophagy is an essential catabolic process that promotes the clearance of waste cellular component (cellular garbage). Loss of autophagy results in cell death and a number of human diseases. Caloric restriction or starvation promotes autophagy and therefore, longevity and healthy living. Excess caloric intake results in the opposite effect, obesity, etc.</li>
<li>A critical metabolic compound required for the autophagic destruction of waste cellular material (garbage) is NAD+ (oxidized nicotinamide adenine dinucleotide).</li>
<li>The enzyme sirtuin uses NAD+ to activate lysozymes which autophagically degrades waste protein.</li>
<li>Sirtuin is a very important enzyme and is activated by resveratrol and some other nature compounds.</li>
<li>Essential requirements for autophagy and longevity:
<ol>
<li>NAD+ and not NADH (oxidized vs reduced form)</li>
<li>NAD+ is increased by fasting (caloric restriction), NAD+ precursor supplementation and activation of sirtuins by compounds such as resveratrol.</li>
<li>The net effect is an enhancement of autophagy and life expectancy.</li>
</ol>
</li>
</ul>
<h2 id="suggestions-for-life-style-regime-for-longevity-and-healthy-living-what-does-david-do">Suggestions for life style regime for longevity and healthy living (What does David do?)<a hidden class="anchor" aria-hidden="true" href="#suggestions-for-life-style-regime-for-longevity-and-healthy-living-what-does-david-do">#</a></h2>
<p>David Sinclair does not make recommendations for any products or supplements, however he has openly discussed his daily regime which includes the following:</p>
<ul>
<li>1 gram of NMN: NMN is converted into NAD+ which is required for autophagy. NMN is expensive. Two new NMN forms have been very recently discovered which are 5 to 10 times more effective then NMN. They should be available in 2 to 5 years.</li>
<li>1 gram of resveratrol. It enhances sirtuin activity which uses NAD+ to enhance autophagy. Health Canada recommends one 250 mg capsule containing 98% resveratrol, twice per day.</li>
<li>1 gram of metformin (a prescription drug for diabetes but has autophagy benefits)</li>
<li>Takes a daily dose of vitamin D, vitamin K2 and 83 mg of aspirin (baby aspirin.</li>
<li>David has given up on desserts (he doesn’t want to consume sucrose, a metabolic poison).</li>
<li>David tries to skip a meal per day.</li>
<li>Our opinion of additional supplements that David could add to his regimen:
<ol>
<li>Psyllium (Metamucil): A plant based soluble fiber or some other soluble fiber such as beta glucans or arabinoxylans. They reduce nutrient up take and favorably modifies gut microflora which produce beneficial short chain fatty acids such as butyric acid.</li>
<li>Grape seed extract, high in anthocyanidins (antioxidants).</li>
<li>Daidzein, a phytoestrogen in soy isoflavones. Important for extension of life.</li>
<li>Apigenin, luteolin or quercetin as inhibitors of the CD 38 and CD 157 NADase pathway. The net effect of these supplements is to increase NAD+ which can be used by sirtuins.</li>
</ol>
</li>
</ul>
<h2 id="autophagy-a-requirement-for-healthy-living-and-longevity">Autophagy A requirement for healthy living and longevity<a hidden class="anchor" aria-hidden="true" href="#autophagy-a-requirement-for-healthy-living-and-longevity">#</a></h2>
<p>Autophagy is an essential process in which damaged cellular proteins are degraded by lysosomes. Autophagy is an essential for homeostatic maintenance. Disruption of autophagy results in many metabolic diseases including a greatly shortened life span.</p>
<p>The sirtuins enzymes play an essential role in regulating autophagy including aging and various age-related disease (including diabetes, cancer, and heart, liver, kidney diseases). [See review by Lee, Experimental and Molecular Medicine 511:102, 2019].</p>
<p>The sirtuins enzymes react with NAD+ to remove acetyl groups from protein, DNA, and histones which is an essential autophagic step. Tissue concentration of NAD+ can be increased by calorie restriction or supplementation of NAD+ precursors such NR or NMN. Resveratrol, a natural product, greatly increases the activity of sirtuins.</p>
<h2 id="supplements-that-can-increase-sirtuin-activity-and-autophagy">Supplements that can increase sirtuin activity and autophagy<a hidden class="anchor" aria-hidden="true" href="#supplements-that-can-increase-sirtuin-activity-and-autophagy">#</a></h2>
<p>This section is based on a review of “The rise of NAD+ and sirtuin – activating compounds.” [Bonkowski and Sinclair, Natural Reviews, Molecular Cell Biology 17:679-690. Important supplements include the following:</p>
<ul>
<li>NAD+- precursors: NMN and NR are currently the best available supplements. NAD+ is an essential substrate for the sirtuin enzyme.</li>
<li>Sirtuin -activity compounds (STACs):</li>
<li>Resveratrol: It is the most potent natural activator of the essential enzyme. It is found in red wine and supplements.</li>
<li>Metformin: Metformin is a prescription drug for the control of type 2 diabetes. It also increases sirtuin activity.</li>
<li>Resveratrol and Metformin: A combination of two compounds when added to the diet synergistically enhanced SIRT1 (sirtuin one) activity. They have been shown to alleviate insulin resistance in rodents fed high fat diets via amelioration of hyperlipidemia, hyperglycemia, inflammation and increased oxidative mechanisms. A potentially powerful antiaging combination. [E1 Agamy and Ahmed, Benha Medical Journal 37(3):561-577, 2020.]</li>
</ul>
<p>Inhibition of enzymes that compete with sirtuin for NAD+:</p>
<ul>
<li>There are three main classes of enzymes that consume NAD+ ; PARPs enzymes, sirtuins, and CD 38 and CD 157 enzymes. CD 38 and CD157 enzymes are upregulated in ageing tissue. The age-dependent decline of NAD+ levels with increased activity of CD 38 and CD 137 range from 10 to 65% depending on organ and age. CD 38 is one of the main NADases in mammals and plays a key role in age-related decline of NAD+. Several inhibitors of CD 38 have been identified including apigenin, quercetin and luteolin (naturally occurring flavonoids). Supplement of these compounds results in an inhibition of NAD+ utilization by CD 38 resulting in an increased amount for sirtuins and therefore an increased level of autophagy.</li>
<li>Inhibitor of CD 38: Current information on inhibition of NADases. Please see publication by Ogura et al., Aging (Albany NY) 12(12):11325-11336, 2020; and Covarrubias et al., Nature Reviews, Molecular Cell Biology 27:119-141, 2021.</li>
<li>Naturally occurring CD 38 inhibitors of NADases other than sirtuins that are flavonoids, such apigenin, quercetin and luteolin.</li>
</ul>
<h2 id="summary-of-nad-and-its-precursors">Summary of NAD+ and its precursors:<a hidden class="anchor" aria-hidden="true" href="#summary-of-nad-and-its-precursors">#</a></h2>
<p>NAD+ is a coenzyme involved in the control of metabolism. It is involved in redox reactions carrying electrons from one reaction to another. NAD+ (nicotinamide dinucleotide) decreases with age. The following list of precursors can increase NAD+ levels.</p>
<ul>
<li>Niacin (vitamin B3, nicotinic acid): Niacin is direct precursor of the coenzymes NAD+ and NADH.</li>
<li>NADH: NADH is the reduced form of NAD+ and is involved in the production of ATP, the energy-factory in the cell.</li>
<li>NR (nicotinamide riboside): It is niacin with a riboside group. NR is a precursor of NAD+ and is a more potent supplement than either niacin or NAD+. Niagen (NR) is commercially available supplement that is more potent than either niacin or NAD+.</li>
<li>NMN (nicotinamide mononucleotide): It is also a direct precursor of NAD+. It can be synthesized from NR by the addition of a phosphate group. It is much more potent as a supplement than either niacin or NAD+. NMN supplements are expensive but have antiaging benefits.</li>
<li>NRH (the reduced form of NR): NRH is a powerful newly discovered metabolite that increases NAD+ intercellular levels 50-fold greater than NR (Giroud – Gerbetant et al., Mol Metabolism 30:192-202, 2019). NRH supplements will probably prove to be highly effective antiaging compounds which should be available after approval by FDA and HC, probably in several years.</li>
<li>NMNH (the reduced form of NMN): NMNH is another newly discovered metabolite. It is a potent NAD+ precursor. NMNH increases NAD+ levels in the body to a much higher extent and faster than NMN or NR (Zapata -Perez et al., The FASEB Journal, 2021:35e21456).</li>
<li>NMNH and NRH are powerful newly discovered compounds: NMNH like NRH are exciting newly discovered metabolites that have considerable potential to increase cellular NAD+ levels and probably autophagy and, therefore, to prevent metabolic diseases. These compounds may prove to have powerful antiaging properties but may not be commercially available for several years. Can life expectancy be greatly increased when these compounds are consumed?</li>
</ul>
<h2 id="e-pathways-for-synthesis-of-different-precursors-of-nad">E. Pathways for synthesis of different precursors of NAD+<a hidden class="anchor" aria-hidden="true" href="#e-pathways-for-synthesis-of-different-precursors-of-nad">#</a></h2>
<p><img loading="lazy" src="/posts/a-summary-of-recent-research-on-increasing-lifespan/images/image-2.png"></p>
<p>The potency of NRH and NMNH are much greater (~50 fold) than NR and NMN. NR and NMN are more potent than niacin and NAD+ but much less potent than NRH and NMNH. All of the precursor compounds are converted into NAD+ in the cell. Currently, NR and NMN are commercially available supplements.</p>
<h2 id="a-model-for-the-connection-between-nad-sirtuins-and-autophagy">A model for the connection between NAD+, sirtuins and autophagy<a hidden class="anchor" aria-hidden="true" href="#a-model-for-the-connection-between-nad-sirtuins-and-autophagy">#</a></h2>
<p><img loading="lazy" src="/posts/a-summary-of-recent-research-on-increasing-lifespan/images/image-3.png"></p>
<p>Nutrient limitation increases the level of the essential cellular metabolite NAD+, which is utilized by sirtuins to increase autophagy within cells and tissues. The activity of sirtuins and autophagy decreases during normal aging as well as due to some diseases and correlates with the known reduction in levels of tissue NAD+. From Lee 2019, Experimental &amp; Molecular Medicine.</p>
<h2 id="overview-on-procedures-to-increase-nad-in-the-body">Overview on procedures to increase NAD+ in the body<a hidden class="anchor" aria-hidden="true" href="#overview-on-procedures-to-increase-nad-in-the-body">#</a></h2>
<ol>
<li>Calorie restriction and exercise:</li>
<li>Natural product supplements to increase tissue NAD+ levels:
<ul>
<li>NAD+ precursor supplements (NMN OR NR) will increase cellular NAD+ levels,</li>
<li>Resveratrol increases sirtuin activity thereby enabling its use of NAD+ for autophagy.</li>
<li>Apigenin, quercetin or luteolin will inhibit the activity of the CD 38 pathway particularly in the elderly. This will result in an increased level of NAD+ which can be used by sirtuins.</li>
<li>The combined benefits of taking the three compounds should provide greatly enhanced synergistic anti-aging benefits. Unfortunately, research on the combined safety and benefits of taking the combined supplements has not been reported.</li>
</ul>
</li>
</ol>
<h2 id="a-summary-of-therapeutic-approaches-to-restore-nad-levels-and-their-impact-on-health">A summary of therapeutic approaches to restore NAD+ levels and their impact on health<a hidden class="anchor" aria-hidden="true" href="#a-summary-of-therapeutic-approaches-to-restore-nad-levels-and-their-impact-on-health">#</a></h2>
<p>Ageing is associated with decreased nicotinamide adenine dinucleotide (NAD+) levels in tissues that promote or exacerbate ageing-related diseases. Thus, restoring NAD+ levels has emerged as a therapeutic approach to prevent and treat ageing-related diseases and to restore health and vigour during the ageing process. Some potential strategies that boost NAD+ levels include lifestyle changes, such as increasing exercise, reducing caloric intake, eating a healthy diet and following a consistent daily circadian rhythm pattern by conforming to healthy sleeping habits and mealtimes. Another approach is the use of small-molecule inhibitors or activators to boost NAD+ biosynthesis and the use of dietary supplements, including NAD+ precursors, such as nicotinamide mononucleotide (NMN) and nicotinamide riboside (NR). All of these approaches promote increased tissue NAD+ levels and are beneficial for health. These include improved tissue and organ function, protection from cognitive decline, improved metabolic health, reduced inflammation and increased physiological benefits, such as increased physical activity, which may collectively extend patient health span and potentially lifespan [Covarrubias et al., Nature Reviews, Molecular Cell Biology 22:119-141, 2021.]</p>
<p><img loading="lazy" src="/posts/a-summary-of-recent-research-on-increasing-lifespan/images/image-4.png"></p>
<h2 id="conclusion">Conclusion<a hidden class="anchor" aria-hidden="true" href="#conclusion">#</a></h2>
<p>In this blog we provided an overview of some of the recent research in ageing, as well as a list of supplements and lifestyle changes which theoretically may slow the rate of ageing.</p>


  </div>

  <footer class="post-footer">
    <ul class="post-tags">
    </ul>
<nav class="paginav">
  <a class="prev" href="http://localhost:1313/posts/using-logstash-to-hash-sensitive-text/">
    <span class="title">« Prev</span>
    <br>
    <span>Using Logstash to scan inside event contents to replace sensitive data with a consistent hash</span>
  </a>
  <a class="next" href="http://localhost:1313/posts/combining-elasticsearch-stemmers-and-synonyms-to-improve-search-relevance/">
    <span class="title">Next »</span>
    <br>
    <span>Combining Elasticsearch stemmers and synonyms to improve search relevance</span>
  </a>
</nav>

  </footer>
</article>
    </main>
    
<footer class="footer">
        <span>&copy; 2025 <a href="http://localhost:1313/">Alexander Marquardt</a></span> · 

    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu');
    if (menu) {
        
        const scrollPosition = localStorage.getItem("menu-scroll-position");
        if (scrollPosition) {
            menu.scrollLeft = parseInt(scrollPosition, 10);
        }
        
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        const html = document.querySelector("html");
        if (html.dataset.theme === "dark") {
            html.dataset.theme = 'light';
            localStorage.setItem("pref-theme", 'light');
        } else {
            html.dataset.theme = 'dark';
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;

        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerHTML = 'copy';

        function copyingDone() {
            copybutton.innerHTML = 'copied!';
            setTimeout(() => {
                copybutton.innerHTML = 'copy';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                navigator.clipboard.writeText(codeblock.textContent);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) { };
            selection.removeRange(range);
        });

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
        } else if (container.parentNode.firstChild == container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
        }
    });
</script>
</body>

</html>
